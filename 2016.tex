% 2016 KTS
%

\documentclass{beamer}

\usetheme{metropolis}

\usefonttheme[onlymath]{serif}
\usepackage[hangul]{kotex}
\usepackage{mathtools}
\usepackage{booktabs}
\usepackage{hologo}
\usepackage{array}

\hypersetup{pdfencoding=auto}

\def\luatex{\hologo{LuaTeX}}
\def\lualatex{\hologo{LuaLaTeX}}
\def\logoko{\textsf{k}\kern-.0625em\textit{o}}
\def\luatexko{\luatex-\logoko}

% title
\title{루아텍 활용}
\subtitle{루아 프로그래밍 중심으로}
\author{남수진}
\date{\today}
\institute{
  2016 한국텍학회 학술대회 및 정기총회 \\
  고려대학교 하나과학관 206호}

%%
\begin{document}

\maketitle

% 차례
\begin{frame}{차례}
  \setbeamertemplate{section in toc}[sections numbered]
  \tableofcontents[hideallsubsections]
\end{frame}

%%
\section{Lua 프로그래밍 언어}

%
\begin{frame}{Lua}
  \begin{itemize}
  \item \alert{루아 프로그래밍 언어}, \url{http://www.lua.org}
  \item 1993년, 호베르투 이에루잘림스시의 의해서 개발
  \item 기존 응용프로그램을 확장하는 목적으로 개발
  \item 속도, 이식성, 확장성, 개발 편의성에 중점
  \item 단순하다. 강력하다. 배우기 쉽다.
  \item 현재 버전 5.3.2
  \end{itemize}
\end{frame}

%
\begin{frame}[fragile]{Lua}
  \small
  \begin{verbatim}
-- greatest common divisor  
function gcd (m, n)
   while m ~= n do
      m, n = math.mod(n,m), m
   end
   return n
end

print(gcd(3, 5))    -- 1
print(gcd(24, 36))  -- 12
print(gcd(56, 63))  -- 7
print(gcd(105, 70)) -- 35
  \end{verbatim}
\end{frame}

%%
\section{\luatex}

%
\begin{frame}{\luatex}
  \begin{itemize}
  \item \luatex 은 Lua 언어를 내장한 \hologo{pdfTeX}의 확장판이다.
  \item \TeX\ 고유의 기능을 유지하고, 루아를 통하여 \TeX\ 내부의 깊은 부분도
    건드릴 수 있다.
  \item 다양한 루아 라이브러리를 제공
  \item \TeX을 만드는데 사용된 \texttt{WEB} 이나 C 언어
    보다 상대적으로 쉬운 스크립트 언어인 루아를 이용하여
    \TeX\ 엔진까지 쉽게 건드릴 수 있다.
  \item mplib 과 같은 새로운 기능 추가도 가능하다.
  \item 현재 버전\\
    {\small\texttt{Version beta-0.80.0 (TeX Live 2015) (rev 5238)}}
  \end{itemize}
\end{frame}

%
\begin{frame}{\luatex 의 전형적인 사용례}
  \begin{itemize}
  \item \alert{\luatexko}\\ \url{https://github.com/dohyunkim/luatexko}
  \item \alert{luamplib} package\\ \url{https://github.com/lualatex/luamplib}
  \end{itemize}
\end{frame}

%
\begin{frame}{\luatex 의 무궁무진한 가능성}
  Lua가 프로그래밍 언어라는 사실을 상기하면,
  \TeX 만으로는 불가능했거나 어려웠던, 
  \begin{itemize}
  \item 데이타베이스와의 연동 
  \item 네트웍 관련 프로그래밍
  \end{itemize}
  등 모든 프로그램적 요소들이 가능하다.
\end{frame}

%
\begin{frame}{\luatex\ 관련 필독}
  \begin{itemize}
    \setlength\itemsep{1em}
  \item \alert{\luatex\ Reference}, \texttt{luatexref-t.pdf}
  \item \alert{A guide to \lualatex}, \texttt{lualatex-doc.pdf}
  \item \alert{The \texttt{luacode} package}, \texttt{luacode.pdf}
  \item \alert{\luatexko\ 간단 메뉴얼}, \texttt{luatexko-doc.pdf}
  \end{itemize}
\end{frame}

%
\begin{frame}[fragile]{\luatex}
  \begin{itemize}
    \item \verb+\directlua{<lua code>}+
    \item \verb+\usepackage{luacode}+
      \begin{itemize}
      \item \verb+\luadirect+
      \item \verb+\luaexec+
      \item \texttt{luacode(*)} 환경
      \end{itemize}
  \end{itemize}
  \metroset{block=fill}
  \begin{exampleblock}{입력}
    \verb+the standard approximation+\\
    \verb+$\pi=\directlua{tex.sprint(math.pi)}$+
  \end{exampleblock}
  \begin{exampleblock}{결과}
    the standard approximation
    $\pi = \directlua{tex.sprint(math.pi)}$
  \end{exampleblock}
\end{frame}

%%
\section{외환 비율표 만들기}

%
\begin{frame}{JSON API for foreign exchange rates}
  \begin{center}
    \Large \url{http://fixer.io}
  \end{center}
\end{frame}

%
\plain{\huge 시연}

%%
\section{연분수 순환 주기 구하기}

%
\begin{frame}{연분수 조판}
  \begin{itemize}
    \setlength\itemsep{1em}
  \item 연분수 자동 조판, \url{http://kko.to/vdP6vr99m}
  \item 연분수 조판 소개, \url{http://kko.to/vdPpkDab6}
  \item 연분수 조판 2탄, \url{http://kko.to/vdPkUFe7u}
  \item 연분수 조판 시리즈 마지막, \url{http://kko.to/vdPu5q8AE}
  \end{itemize}
\end{frame}

% continued fraction
\makeatletter
\def\ltcfrac[#1;#2]{\cfr@c#1,#2,\ldots,\end}
\def\cfr@c#1,#2\end{\ifx#1\ldots\ddots\else#1\fi
  \ifx#2\end\else+{\strut1\hfill\over\displaystyle\cfr@c#2\end}\fi}
\makeatother

%
\begin{frame}{연분수 순환 주기 (Periodic continued fraction)}
  \url{http://kko.to/viBhWcdig}
  \begin{align*}
    \sqrt{2}&=\ltcfrac[1;2,2]=[1;\overline{2}] \\
    \sqrt{3}&=\ltcfrac[1;1,2]=[1;\overline{1,2}]
  \end{align*}
\end{frame}

%
\plain{\huge 시연}

%%
\section{복면산 (Alphametics)}

\newcolumntype{R}{>{\tt}r}

%
\begin{frame}
  \frametitle{복면산}
  {\LARGE
  \[
  \def\arraystretch{0.7}
  \begin{array}{c@{\,}R}
    & SEND \\
    + & MORE \\
    \cmidrule(lr){1-2}
    & MONEY
  \end{array}
  \quad
  \def\arraystretch{0.7}
  \begin{array}{c@{\,}R}
    & BATMAN \\
    + & GOTHAM \\
    \cmidrule(lr){1-2}
    & NIGHTS
  \end{array}
  \quad
  \begin{array}{c@{\,}R}
    & ZEROS \\
    + & ONES \\
    \cmidrule(lr){1-2}
    & BINARY
  \end{array}
  \]
  }
  
  {\Large
    \[ \texttt{VIOLIN}+\texttt{VIOLIN}+\texttt{VIOLA}%
    =\texttt{TRIO}+\texttt{SONATA} \]
  }
\end{frame}

%
\begin{frame}{복면산}
  \[
  \def\arraystretch{0.7}
  \begin{array}{c@{\,}R}
    & INTO \\
    & ONTO \\
    & CANON \\
    & INTACT \\
    & AMMONIA \\
    & OMISSION \\
    & DIACRITIC \\
    & STATISTICS \\
    & ASSOCIATION \\
    & ANTIMACASSAR \\
    & CONTORTIONIST \\
    & NONDISCRIMINATION \\
    + & CONTRADISTINCTION \\
    \cmidrule(lr){1-2}
    & MISADMINISTRATION
  \end{array}
  \]
\end{frame}

% for alphametics
\directlua{dofile("puzzle.lua")}
\newcommand{\alphametics}[2][v]{\directlua{puzzle('#1','#2')}}

%
\begin{frame}{복면산}
  \def\arraystretch{0.7}
  \alphametics{INTO+ONTO+CANON+INTACT+AMMONIA+OMISSION+DIACRITIC%
    +STATISTICS+ASSOCIATION+ANTIMACASSAR+CONTORTIONIST+NONDISCRIMINATION%
    +CONTRADISTINCTION= MISADMINISTRATION}
\end{frame}

%
\begin{frame}[fragile]{복면산}
  \Large
\begin{verbatim}
  \alphametics{INTO+ONTO+CANON%
    +INTACT+AMMONIA+OMISSION%
    +DIACRITIC+STATISTICS%
    +ASSOCIATION+ANTIMACASSAR%
    +CONTORTIONIST%
    +NONDISCRIMINATION%
    +CONTRADISTINCTION%
    =MISADMINISTRATION}
\end{verbatim}
\end{frame}

%
\begin{frame}{복면산}
  \Large
  \alphametics[h]{VIOLIN+VIOLIN+VIOLA=TRIO+SONATA}
\end{frame}

%
\begin{frame}[fragile]{복면산}
  \Large
\begin{verbatim}
  \alphametics[h]{VIOLIN+VIOLIN%
    +VIOLA=TRIO+SONATA}
\end{verbatim}
\end{frame}

%
\plain{\huge 시연}

%
\plain{\huge ¿Tienes alguna pregunta?}

%
\plain{\Huge Gracias.}

\end{document}

